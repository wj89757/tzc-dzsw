!function(a){"use strict";function d(){var a,b=document.createElement("fakeelement"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}var g,b="iziModal",c={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened",DESTROYED:"destroyed"},e=d(),f=!1;/Mobi/.test(navigator.userAgent)&&(f=!0),g=function(a,b){this.init(a,b)},g.prototype={constructor:g,init:function(d,e){var g,h,i,j,f=this;this.$element=a(d),this.id=this.$element.attr("id"),this.state=c.CLOSED,this.options=e,this.timer=null,this.headerHeight=0,this.$header=a('<div class="'+b+'-header"><h2 class="'+b+'-header-title">'+e.title+'</h2><p class="'+b+'-header-subtitle">'+e.subtitle+'</p><a href="javascript:void(0)" class="'+b+'-button-close" data-'+b+"-close></a></div>"),this.$overlay=a('<div class="'+b+'-overlay" style="background-color:'+e.overlayColor+'"></div>'),""===e.subtitle&&this.$header.addClass(b+"-noSubtitle"),e.iframe===!0?(this.$element.html('<div class="'+b+'-wrap"><div class="'+b+"-content "+b+'-content-loader"><iframe class="'+b+'-iframe"></iframe>'+this.$element.html()+"</div></div>"),null!==e.iframeHeight&&this.$element.find("."+b+"-iframe").css("height",e.iframeHeight)):this.$element.html('<div class="'+b+'-wrap"><div class="'+b+'-content">'+this.$element.html()+"</div></div>"),a(document.body).find("style[rel="+this.id+"]").remove(),("undefined"!=typeof e.padding||0!==e.padding)&&this.$element.find("."+b+"-content").css("padding",e.padding),(""!==e.title||""!==e.subtitle)&&(null!==e.headerColor&&(this.$element.css("border-bottom","3px solid "+e.headerColor),this.$header.css("background",this.options.headerColor)),null!==e.iconClass&&(this.$header.prepend('<i class="'+b+"-header-icon "+e.iconClass+'"></i>'),this.$header.find("."+b+"-header-icon").css("color",e.iconColor)),this.$element.prepend(this.$header)),g=/%|px|em|cm/,h=String(e.width).split(g),i=String(e.width),j="px",h=String(h).split(",")[0],isNaN(e.width)&&(j=-1!=String(e.width).indexOf("%")?"%":i.slice("-2")),this.$element.css({"margin-left":-(h/2)+j,"max-width":parseInt(h)+j}),this.mediaQueries='<style rel="'+this.id+'">@media handheld, only screen and (max-width: '+h+"px) { #"+this.$element[0].id+"{ width: 100% !important; max-width: 100% !important; margin-left: 0 !important; left: 0 !important; } }</style>",a(document.body).append(this.mediaQueries),this.$element.addClass(b+" "+e.theme),this.$element.css("margin-top",parseInt(-(this.$element.innerHeight()/2))+"px"),this.$element.find("."+b+"-header").length&&this.$element.css("overflow","hidden"),this.$overlay.click(function(){f.options.overlayClose&&!f.$element.hasClass(f.options.transitionOutModal)&&f.close()}),this.$element.on("click","[data-"+b+"-close]",function(a){a.preventDefault(),f.close()})},toggle:function(){this.state==c.OPENED&&this.close(),this.state==c.CLOSED&&this.open()},open:function(d){function j(){g.$element.trigger(c.OPENED),g.state=c.OPENED,console.info("[ "+b+" | "+g.id+" ] Opened."),g.options.onOpened.call(this)}var h,g=this;if(d&&"function"==typeof d&&d(g),this.options.iframe===!0){if(h=null,null!==this.options.iframeURL)h=this.options.iframeURL;else try{h=d.target.href,void 0!==h&&(h=d.target.href)}catch(i){console.warn(i)}this.$element.find("."+b+"-iframe").attr("src",h)}this.$element.trigger(c.OPENING),this.state=c.OPENING,console.info("[ "+b+" | "+this.id+" ] Opening..."),(this.options.bodyOverflow||f)&&a(document.body).css("overflow","hidden"),g.options.onOpening.call(this),this.$overlay.appendTo("body"),this.options.transitionInOverlay&&this.$overlay.addClass(this.options.transitionInOverlay),""!==this.options.transitionInModal?(this.$element.addClass(this.options.transitionInModal).show(),this.$element.find("."+b+"-wrap").one(e,function(){g.$element.removeClass(g.options.transitionInModal),g.$overlay.removeClass(g.options.transitionInOverlay),j()})):(this.$element.show(),j()),g.options.focusInput&&g.$element.find(":input:not(button):enabled:visible:first").focus(),function k(){g.recalculateLayout(),g.timer=setTimeout(k,500)}(),a(document).keydown(function(a){g.options.closeOnEscape&&27===a.keyCode&&g.close()})},close:function(d){function h(){g.options.iframe===!0&&g.$element.find("."+b+"-iframe").attr("src",""),(g.options.bodyOverflow||f)&&a(document.body).css("overflow","initial"),a(document.body).removeClass(b+"-attached"),g.$element.trigger(c.CLOSED),g.state=c.CLOSED,console.info("[ "+b+" | "+g.id+" ] Closed."),g.options.onClosed.call(this)}var g=this;d&&"function"==typeof d&&d(g),a(document).off("keydown"),this.state=c.CLOSING,this.$element.trigger(c.CLOSING),console.info("[ "+b+" | "+this.id+" ] Closing..."),clearTimeout(g.timer),g.options.onClosing.call(this),""!==this.options.transitionOutModal?(this.$element.attr("class",b+" "+this.options.theme+" "+this.options.transitionOutModal),this.$overlay.attr("class",b+"-overlay "+this.options.transitionOutOverlay),this.$element.one(e,function(){g.$element.hasClass(g.options.transitionOutModal)&&(g.$element.removeClass(g.options.transitionOutModal).hide(),g.$overlay.removeClass(g.options.transitionOutOverlay).remove(),h())})):(this.$element.hide(),this.$overlay.remove(),h())},destroy:function(){var d=a.Event("destroy");this.$element.trigger(d),a(document).off("keydown"),clearTimeout(this.timer),this.options.iframe===!0&&this.$element.find("."+b+"-iframe").remove(),this.$element.html(this.$element.find("."+b+"-content").html()),a(document.body).find("style[rel="+this.id+"]").remove(),this.$element.off("click","[data-"+b+"-close]"),this.$element.off("."+b).removeData(b).attr("style",""),this.$overlay.remove(),this.$element.trigger(c.DESTROYED),this.$element=null},getState:function(){return console.info(this.state),this.state},setTitle:function(a){null!==this.options.title&&(this.$header.find("."+b+"-header-title").html(a),this.options.title=a)},setSubtitle:function(a){null!==this.options.subtitle&&(this.$header.find("."+b+"-header-subtitle").html(a),this.options.subtitle=a)},setIconClass:function(a){null!==this.options.iconClass&&(this.$header.find("."+b+"-header-icon").attr("class",b+"-header-icon "+a),this.options.iconClass=a)},setHeaderColor:function(a){null!==this.options.headerColor&&(this.$element.css("border-bottom","3px solid "+a),this.$header.css("background",a),this.options.headerColor=a)},startLoading:function(){this.$element.find("."+b+"-loader").length||this.$element.append('<div class="'+b+"-loader "+this.options.transitionInOverlay+'"></div>')},stopLoading:function(){var a=this;this.$element.find("."+b+"-loader").removeClass(this.options.transitionInOverlay).addClass(this.options.transitionOutOverlay),this.$element.find("."+b+"-loader").one(e,function(){a.$element.find("."+b+"-loader").removeClass(a.options.transitionOutOverlay).remove()})},recalculateLayout:function(){var d,e,f,g,h,i;this.$element.find("."+b+"-header").length&&(this.headerHeight=parseInt(this.$element.find("."+b+"-header").innerHeight())+2,this.$element.css("overflow","hidden")),d=a(window).height(),e=this.$element.find("."+b+"-content")[0].scrollHeight,f=parseInt(-((this.$element.innerHeight()+1)/2))+"px",(this.state==c.OPENED||this.state==c.OPENING)&&(this.options.iframe===!0?d<this.options.iframeHeight+this.headerHeight?(a(document.body).addClass(b+"-attached"),this.$element.find("."+b+"-iframe").css({height:parseInt(d-this.headerHeight)+"px"})):(a(document.body).removeClass(b+"-attached"),this.$element.find("."+b+"-iframe").css({height:parseInt(this.options.iframeHeight)+"px"})):(d>e+this.headerHeight&&(a(document.body).removeClass(b+"-attached"),this.$element.find("."+b+"-wrap").css({height:"auto"})),(this.$element.innerHeight()>d||this.$element.innerHeight()<e)&&(a(document.body).addClass(b+"-attached"),this.$element.find("."+b+"-wrap").css({height:parseInt(d-this.headerHeight)+"px"})),g=this.$element.find("."+b+"-wrap").scrollTop(),h=this.$element.find("."+b+"-content").innerHeight(),i=this.$element.find("."+b+"-wrap").innerHeight(),h-50>i+g?this.$element.addClass("hasScroll"):this.$element.removeClass("hasScroll"))),this.$element.css("margin-top")!=f&&"0px"!=this.$element.css("margin-top")&&this.$element.css("margin-top",f)}},a.fn[b]=function(c,d){return this.each(function(){var e=a(this),f=e.data(b),h=a.extend({},a.fn.iziModal.defaults,e.data(),"object"==typeof c&&c);f||c&&"object"!=typeof c||e.data(b,f=new g(this,h)),"string"==typeof c&&"undefined"!=typeof f?f[c].apply(f,[].concat(d)):h.autoOpen&&f.open()})},a.fn[b].defaults={title:"",subtitle:"",theme:"",headerColor:"#0096BF",overlayColor:"rgba(0, 0, 0, 0.4)",iconColor:"",iconClass:null,width:600,padding:0,iframe:!1,iframeHeight:400,iframeURL:null,overlayClose:!0,closeOnEscape:!0,bodyOverflow:!1,focusInput:!0,autoOpen:!1,transitionInModal:"transitionIn",transitionOutModal:"transitionOut",transitionInOverlay:"fadeIn",transitionOutOverlay:"fadeOut",onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}},a.fn[b].Constructor=g}.call(this,window.jQuery);